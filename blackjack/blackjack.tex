\documentclass[12pt]{article}
\usepackage{fullpage}
\usepackage{enumitem}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{bm}
\usepackage{hyperref}

\begin{document}

\begin{center}
{\Large CS221 Fall 2018 Homework 4}

\begin{tabular}{rl}
SUNet ID: & 05794739 \\
Name: & Luis Perez \\
Collaborators: &
\end{tabular}
\end{center}

By turning in this assignment, I agree by the Stanford honor code and declare
that all of this is my own work.

\section*{Problem 1}

\begin{enumerate}[label=(\alph*)]
  \item We give the value for each iteration. We note that $V^0_{\text{opt}}(s) = 0$ to start out. We also note that since for $s_t \in \{-2, 2\}$ we are at a terminal state, we'll have $V_{\text{opt}}(s_t) = 0$ for all iterations.

  \begin{enumerate}
    \item After iteration $0$, we'll have:
    \begin{align*}
      V^0_{\text{opt}}(-1) &= 0 \\
      V^0_{\text{opt}}(0) &= 0 \\
      V^0_{\text{opt}}(1) &= 0
    \end{align*}
    \item After the first iteration, we'll have the following values:
    \begin{align*}
      V^1_{\text{opt}}(-1) &= \max_{a \in \{-1,1\}}\{0.8[20 + V^0_{\text{opt}}(-2)] + 0.2[-5 + V^0_{\text{opt}}(0)], 0.7[20 + V^0_{\text{opt}}(-2)] + 0.3[-5 V^0_{\text{opt}}(0)] \} \\ &= 15 \\
      V^1_{\text{opt}}(0) &= \max_{a \in \{-1,1\}}\{0.8[-5 + V^0_{\text{opt}}(-1)] + 0.2[-5 + V^0_{\text{opt}}(1)], 0.7[-5 + V^0_{\text{opt}}(-1)] + 0.3[-5 + V^0_{\text{opt}}(1)] \}\\  &= -5 \\
      V^1_{\text{opt}}(1) &= \max_{a \in \{-1,1\}}\{0.8[-5+ V^0_{\text{opt}}(0)] + 0.2[100 + V^0_{\text{opt}}(2)], 0.7[-5 + V^0_{\text{opt}}(0)] + 0.3[100 + V^0_{\text{opt}}(2) \} \\ &= 26.5
    \end{align*}
    \item Finally, after the second iteration, we'll have:
    \begin{align*}
      V^2_{\text{opt}}(-1) &= \max_{a \in \{ -1, 1 \}}\{0.8[20 + V^1_{\text{opt}}(-2)] + 0.2[-5 + V^1_{\text{opt}}(0)], 0.7[20 + V^1_{\text{opt}}(-2)] + 0.3[-5 + V^1_{\text{opt}}(0)] \}\\
       &= 14 \\
      V^2_{\text{opt}}(0) &= \max_{a \in \{ -1, 1 \}}\{0.8[-5 + V^1_{\text{opt}}(-1)] + 0.2[-5 + V^1_{\text{opt}}(1)], 0.7[-5 + V^1_{\text{opt}}(-1)] + 0.3[-5 + V^1_{\text{opt}}(1)] \} \\
      &= 13.45 \\
      V^2_{\text{opt}}(1) &= \max_{a \in \{ -1, 1 \}}\{0.8[-5 + V^1_{\text{opt}}(0)] + 0.2[100 + V^1_{\text{opt}}(2)], 0.7[-5 + V^1_{\text{opt}}(0)] + 0.3[100 + V^1_{\text{opt}}(2) \}\\
       &= 23
    \end{align*}
  \end{enumerate}
  \item We interpret this question as asking for the resulting optimal policy for non-terminal states after two iterations. In that case, we have:
  \begin{align*}
      \pi^2_{\text{opt}}(-1) &= \arg\max_{a \in \{ -1, 1 \}}\{0.8[20 + V^1_{\text{opt}}(-2)] + 0.2[-5 + V^1_{\text{opt}}(0)], 0.7[20 + V^1_{\text{opt}}(-2)] + 0.3[-5 + V^1_{\text{opt}}(0)] \}\\
       &= -1 \\
      \pi^2_{\text{opt}}(0) &= \arg\max_{a \in \{ -1, 1 \}}\{0.8[-5 + V^1_{\text{opt}}(-1)] + 0.2[-5 + V^1_{\text{opt}}(1)], 0.7[-5 + V^1_{\text{opt}}(-1)] + 0.3[-5 + V^1_{\text{opt}}(1)] \} \\
      &= 1 \\
      \pi^2_{\text{opt}}(1) &= \arg\max_{a \in \{ -1, 1 \}}\{0.8[-5 + V^1_{\text{opt}}(0)] + 0.2[100 + V^1_{\text{opt}}(2)], 0.7[-5 + V^1_{\text{opt}}(0)] + 0.3[100 + V^1_{\text{opt}}(2) \}\\
       &= 1
    \end{align*}
\end{enumerate}

\section*{Problem 2}

\begin{enumerate}[label=(\alph*)]
  \item It is not always the case that $V_1(s_{\text{start}}) \geq V_2(s_{\text{start}})$. For a counter-examples, see ``submission.py''.
\end{enumerate}
\end{document}